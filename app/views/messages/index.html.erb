<h1>Messages#index</h1>
<p>Find me in app/views/messages/index.html.erb</p>

<%
=begin %>
<%= flash[:notice] %>
<%
=end %>

<h3>Import Chat</h3>
  <%= form_tag import_messages_path, multipart: true do %>
    <label for="file">Upload Chat File</label>
    <%= file_field_tag :file %>
    <%= submit_tag "Import Chat" %>
  <% end %>
</div>


<table>
  <thead>
    <tr>
      <th>Message ID</th>
      <th>Date+Time</th>
      <th>Date</th>
      <th>Time</th>
      <th>User ID</th>
      <th>Sender</th>
      <th>Message</th>
    </tr>
  </thead>
  <tbody>
    <% @messages.each do |message| %>
      <tr>
        <td class="message-id"><%= message.id %></td>
        <td class="message-datetime"><%= message.msg_date_time %></td>
        <td class="message-date"><%= message.date.strftime("%-m/%-d/%Y") %></td>
        <td class="message-time"><%= message.time %></td>
        <td class="message-user-id"><%= message.user_id %></td>
        <td class="message-sender"><%= message.sender %></td>
        <td class="message-message">
          <% if message.media == true %>
            <% if message.image != nil %>
              <%= image_tag("/media/#{message.image}.jpg", class: "attached-image") %>
            <% elsif message.video != nil %>
              <%= video_tag("/media/#{message.video}.mp4", :size => "320x240", :controls => true) %>
            <% end %>
          <% else %> 
            <%= message.message %>
          <% end %>
        </td>
      </tr>
    <% end %>
    
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th>User ID</th>
      <th>First Name</th>
      <th>Last Name</th>
      <th>Username</th>
      <th>Email</th>
    </tr>
  </thead>
  <tbody>
    <% @users.each do |user| %>
      <tr>
        <td class="user-id"><%= user.id %></td>
        <td class="user-first-name"><%= user.first_name %></td>
        <td class="user-last-name"><%= user.last_name %></td>
        <td class="user-username"><%= user.username %></td>
        <td class="user-email"><%= user.email %></td>
      </tr>
    <% end %>
  </tbody>
</table>